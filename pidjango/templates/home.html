<!DOCTYPE html>
<html>
<head>
    {% load static %}
    <link rel="stylesheet" href="{% static 'home.css' %}">
</head>

<body>
    <div class="flex-container">
        <div id="logo" >
            <span class="speedometer"></span>
            <!-- pointer value between -90 and 90deg -->
            <span id = 1 class="pointer" ></span>
            <!-- number value between 0 and 5000-->
            <h1 class="number"> 100 </h1>
        </div>
        <div id="logo">
            <span class="speedometer"></span>
            <span class="pointer" style="--value: 45deg;"></span>
            <h1 class="number"> 20 </h1>
        </div> 
        <div id="logo">
            <span class="speedometer"></span>
            <span class="pointer" style="--value: 45deg;"></span>
            <h1 class="number"> 20 </h1>
        </div> 
        <div id="logo">
            <span class="speedometer"></span>
            <span class="pointer" style="--value: 45deg;"></span>
            <h1 class="number"> 20 </h1>
        </div>
	<div id="logo">
            <span class="speedometer"></span>
            <span class="pointer" style="--value: 45deg;"></span>
            <h1 class="number"> 20 </h1>
        </div>
	<div id="logo">
            <span class="speedometer"></span>
            <span class="pointer" style="--value: 45deg;"></span>
            <h1 class="number"> 20 </h1>
        </div>
	<div id="logo">
            <span class="speedometer"></span>
            <span class="pointer" style="--value: 45deg;"></span>
            <h1 class="number"> 20 </h1>
        </div>
	<div id="logo">
            <span class="speedometer"></span>
            <span class="pointer" style="--value: 45deg;"></span>
            <h1 class="number"> 20 </h1>
        </div>
    </div>

    <div class="flex-video">  
    	<img class="video" src="http://192.168.1.10:8000/stream/">
    </div> 

	<script>
		function getData() {
			console.log('getData');    				
			const xmlhttp = new XMLHttpRequest();
    		const url = "http://192.168.1.10:8000/sps/data";
    		xmlhttp.onreadystatechange = function() {
        		if (this.readyState == 4 && this.status == 200) {
            		const data = JSON.parse(this.responseText);
            		console.log(data);
					document.getElementById("1").style="--value: "+ Object.keys(data)[0] + "deg";
                    setTimeout(getData, 3*1000);
        		}
   			}
    		xmlhttp.open("GET", url, true);
    		xmlhttp.send();
		}
		getData();
    </script>
</body>
</html>
